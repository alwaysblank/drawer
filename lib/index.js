var t=function(t){return t instanceof Element||t instanceof HTMLDocument},e=/^\w*.$/,n=/^#[\w_-]*.$/,r=/^\.[\w_-]*.$/,i=function(i){return t(i)?[i]:"string"!=typeof i?[]:e.test(i)?Array.prototype.slice.call(document.getElementsByTagName(i)):n.test(i)?[document.getElementById(i.slice(1))]:r.test(i)?Array.prototype.slice.call(document.getElementsByClassName(i.slice(1))):Array.prototype.slice.call(document.querySelectorAll(i))},s=function(t){return Array.isArray(t)?t.reduce((function(t,e){return t.concat(e)}),[]):t};function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}function a(t,e,n,r){var i=this;"object"==typeof t&&Object.keys(t).map((function(i){e.has(i)||(n.indexOf(i)>-1||r.indexOf(i)>-1)&&e.set(i,t[i])})),e.size>0&&e.forEach((function(t,e){n.indexOf(e)>-1?i.settings[e]=t:r.indexOf(e)>-1&&(i.store[e]=t)}))}function u(){var t=this,e=new Map;return Object.keys(this).map((function(n){e.set(n,t[n])})),e}function c(t){history.pushState(null,null,"#"+t)}function d(){return window.location.hash.slice(1)}function h(t){t&&d()===t&&f()}function f(){history.pushState(null,null,window.location.pathname)}function l(t){return"string"==typeof t&&t.length>0}function b(t,e){l(t)&&e(t)}function p(t){Object.defineProperties(t,{repo:{value:new Map,writable:!0},append:{value:m.bind(t)}})}function m(t,e){if(this.repo.has(t)){var n=this.repo.get(t);n.push(e),this.repo.set(t,n)}else this.repo.set(t,[e])}function g(){var t=this;p(this),Object.defineProperties(this,{inStates:{value:function(e){return t.states.indexOf(e)>-1}},states:{enumerable:!0,get:function(){return t.repo.get("states")||["open","closed"]},set:function(e){"string"==typeof e?m("states",e):Array.isArray(e)&&t.repo.set("states",e)}},initState:{enumerable:!0,get:function(){return t.repo.get("initState")||t.states[0]},set:function(e){"string"==typeof e&&t.inStates(e)?t.repo.set("initState",e):t.repo.set("initState",!1)}},hiddenStates:{enumerable:!0,get:function(){return t.repo.get("hiddenStates")||["closed"]},set:function(e){if("string"==typeof e&&t.inStates(e))m("hiddenStates",e);else if(Array.isArray(e)){var n=e.filter((function(e){return t.inStates(e)}));t.repo.set("hiddenStates",n)}}},hash:{enumerable:!0,get:function(){return t.repo.get("hash")||""},set:function(e){l(e)&&t.repo.set("hash",e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""))}},hashState:{enumerable:!0,get:function(){return t.repo.get("hashState")?t.repo.get("hashState"):t.states.filter((function(e){return t.hiddenStates.indexOf(e)<0}))[0]||""},set:function(e){"string"==typeof e&&t.inStates(e)&&t.repo.get("hiddenState").indexOf(e)<0&&t.repo.set("hashState",e)}},uuid:{enumerable:!0,get:function(){return t.repo.get("uuid")||o},set:function(e){t.repo.set("uuid",e)}}}),Object.defineProperty(this,"defaults",{value:u.bind(this)()})}function v(){var t=this;p(this),Object.defineProperties(this,{cycle:{enumerable:!0,get:function(){return t.repo.get("cycle")||!0},set:function(e){return t.repo.set("cycle",Boolean(e))}},accessibility:{enumerable:!0,get:function(){return t.repo.get("actions")||!0},set:function(e){return t.repo.set("actions",Boolean(e))}}}),Object.defineProperty(this,"defaults",{value:u.bind(this)()})}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function w(t,e){var n=this;Object.defineProperties(this,{settings:{value:new v,writable:!0},store:{value:new M,writable:!0},mount:{get:function(){return n.store.mount},set:function(t){return n.store.mount=t}},actions:{get:function(){return n.store.actions},set:function(t){return n.store.actions=t}},drawers:{get:function(){return n.store.drawers},set:function(t){return n.store.drawers=t}},detachDrawer:{value:function(t){var e=new CustomEvent("knob.drawerRemoved",{detail:{drawer:t,knob:n.mount}});n.mount.dispatchEvent(e),t.dispatchEvent(e)}}}),this.mount=t,this.mount.knob=this,this.actions=O,this.mount.addEventListener("knob.drawerAdded",x.bind(this)),this.mount.addEventListener("knob.drawerRemoved",k.bind(this)),this.mount.addEventListener("drawer.knobRemoved",k.bind(this)),this.mount.addEventListener("click",E.bind(this)),j.bind(this)(e)}function y(t){if("knob"in t)return t.knob}function x(t){var e=t.detail.drawer.drawer;S(this,e),function(t,e){t.settings.accessibility&&t.mount.setAttribute("aria-controls",e.mount.id)}(this,e)}function k(t){var e=t.detail.drawer;switch(t.type){case"knob.drawerRemoved":case"drawer.knobRemoved":this.drawers.has(e)&&(this.drawers.get(e).disconnect(),this.store.repo.get("drawers").delete(e))}}function O(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=r.attributeName,s=r.target;"hidden"===i&&S(e,B(s))}}function S(t,e){t.settings.accessibility&&t.mount.setAttribute("aria-expanded",String(!e.hidden))}function E(){var t=this.settings.cycle,e=this.drawers;t&&e.forEach((function(t,e){var n;null===(n=B(e))||void 0===n||n.cycle()}))}function j(t){var e=Object.keys(this.settings),n=Object.keys(this.store),r=new Map,i=this.mount.dataset;i.cycle&&r.set("cycle","true"===i.cycle),i.accessibility&&r.set("accessibility","true"===i.accessibility),a.bind(this)(t,r,e,n)}function A(t,e){return void 0===e&&(e=[]),new Map(this.repo.get(t)||e)}function P(t,e){return void 0===e&&(e=[]),function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}(this.repo.get(t)||e)}function C(e){Object.defineProperties(e,{repo:{value:new Map,writable:!0},mapGet:{value:A.bind(e)},arrayGet:{value:P.bind(e)},mount:{enumerable:!0,get:function(){return e.repo.get("mount")||void 0},set:function(n){!t(e.repo.get("mount"))&&t(n)&&e.repo.set("mount",n)}},actions:{enumerable:!0,get:function(){return e.mapGet("actions")},set:function(t){e.actions.size<1&&e.repo.set("actions",e.actions),(Array.isArray(t)?t.map(s):[t]).map((function(t){return e.repo.get("actions").set(t.name||o(),t)}))}}})}function L(){var t=this;C(this),Object.defineProperties(this,{knobs:{enumerable:!0,get:function(){return t.mapGet("knobs")},set:function(e){var n;t.knobs.size<1&&t.repo.set("knobs",t.knobs);var r={};Array.isArray(e)?n=s(e.map(i)):e.hasOwnProperty("elements")&&e.hasOwnProperty("settings")?(n=s(e.elements.map(i)),r=e.settings):n=i(e),n.map((function(e){(y(e)||new w(e,r)).drawers=t.mount}))}}}),Object.defineProperty(this,"defaults",{value:u.bind(this)()})}function M(){var t=this;C(this),Object.defineProperties(this,{drawers:{enumerable:!0,get:function(){return t.mapGet("drawers")},set:function(e){t.drawers.size<1&&t.repo.set("drawers",t.drawers),(Array.isArray(e)?e.map(i).map(s):i(e)).filter((function(t){return void 0!==B(t)})).map((function(e){var n=new MutationObserver((function(e,n){t.repo.get("actions").size>0&&t.repo.get("actions").forEach((function(r){r(e,t.repo.get("mount").knob,n)}))}));n.observe(e,{attributes:!0,attributeFilter:["data-states","hidden"],attributeOldValue:!0,childList:!1,subtree:!1}),t.repo.get("drawers").set(e,n),e.drawer.store.repo.get("knobs").set(t.repo.get("mount"),t.repo.get("mount").knob),t.repo.get("mount").dispatchEvent(new CustomEvent("knob.drawerAdded",{detail:{drawer:e}}))}))}}}),Object.defineProperty(this,"defaults",{value:u.bind(this)()})}function R(t,e){var n=this;Object.defineProperties(this,{settings:{value:new g,writable:!0},store:{value:new L,writable:!0},mount:{get:function(){return n.store.mount},set:function(t){return n.store.mount=t}},state:{get:function(){return n.mount.dataset.state},set:function(t){n.settings.states.indexOf(t)>-1&&(n.mount.dataset.state=t)}},hidden:{get:function(){return n.mount.hidden},set:function(t){return n.mount.hidden=Boolean(t)}},hash:{get:function(){return n.settings.hash},set:function(t){return n.settings.hash=t}},actions:{get:function(){return n.store.actions},set:function(t){return n.store.actions=t}},knobs:{get:function(){return n.store.knobs},set:function(t){return n.store.knobs=t}},hasher:{value:{setUrl:function(){return b(n.settings.hash,c)},clearUrl:function(){return b(n.settings.hash,h)},wipeUrl:f}},cycle:{value:function(t){return $(n.mount,t)}},detachKnob:{value:function(t){if(n.knobs.has(t)){var e=new CustomEvent("drawer.knobRemoved",{detail:{drawer:n.mount,knob:t}});n.mount.dispatchEvent(e),t.dispatchEvent(e)}}}}),this.actions=N,this.actions=U,this.mount=t,this.mount.drawer=this,this.mount.id||(this.mount.id=this.settings.uuid?this.settings.uuid():o()),this.mount.addEventListener("knob.drawerRemoved",G.bind(this)),this.mount.addEventListener("drawer.knobRemoved",G.bind(this));var r=new MutationObserver((function(t,e){return z.bind(n)(t,e)}));if(this.observer=r.observe(this.mount,{attributes:!0,attributeFilter:["data-state","hidden"],attributeOldValue:!0,childList:!1,subtree:!1}),T.bind(this)(e),d().length>0){var i=d();l(i)&&this.hash===i&&this.settings.hashState.length>0&&(this.settings.initState=this.settings.hashState)}this.state=this.settings.initState}function B(t){return"drawer"in t?t.drawer:void 0}function z(t,e){var n=this;this.actions.forEach((function(r){return r(t,n,e)}))}function G(t){var e=t.detail.knob;switch(t.type){case"knob.drawerRemoved":case"drawer.knobRemoved":this.knobs.get(e)&&this.store.repo.get("knobs").delete(e)}}function N(t,e){for(var n=0;n<t.length;n++){"data-state"===t[n].attributeName&&(e.hidden=e.settings.hiddenStates.indexOf(e.state)>-1)}}function U(t,e){for(var n=0;n<t.length;n++){var r=t[n].attributeName,i=e.settings.hashState,s=e.state,o=e.hasher,a=o.setUrl,u=o.clearUrl;"data-state"===r&&(s===i?a():u())}}function $(t,e){var n=B(t);if(n){var r=n.settings.states,i=r.indexOf(n.state),s=r[i+1]||r[0];if(e){var o=e[e.indexOf(n.state)+1]||e[0];r.indexOf(o)>-1&&(s=o)}n.state=s}}function T(t){var e=Object.keys(this.settings),n=Object.keys(this.store),r=new Map,i=this.mount.dataset;i.state&&r.set("initState",i.state),i.knob&&r.set("knobs",i.knob),i.hash&&r.set("hash",i.hash),i.hashState&&r.set("hashState",i.hashState),a.bind(this)(t,r,e,n)}function D(t,e){var n=i(t||'[data-module="drawer"]');if(!(n.length<1))return n.map((function(t){return new R(t,e)}))}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},writable:!0,configurable:!0}),function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}}();export{D as Cabinet,R as Drawer,w as Knob,$ as cycle,B as getDrawer,y as getKnob};
